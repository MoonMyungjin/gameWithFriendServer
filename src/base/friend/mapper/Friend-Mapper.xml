<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="base.friend.mapper">
	
		
	<update id="friendAddSend"  >
		INSERT INTO 
		FRIEND (F_MY_ID,F_YOU_ID,F_STATE_CD,F_REG_ID,F_REG_DATE,F_MOD_ID) 
		VALUES (#{fMyId}, #{fYouId},'10502',#{fMyId},NOW(),'')
	</update>
	
	<update id="friendAddReceive"  >
		INSERT INTO 
		FRIEND (F_MY_ID,F_YOU_ID,F_STATE_CD,F_REG_ID,F_REG_DATE,F_MOD_ID) 
		VALUES (#{fYouId}, #{fMyId},'10503',#{fMyId},NOW(),'')
	</update>
	
	<select id="selectFriendList" resultType="base.friend.vo.FriendVO">
		
		SELECT F_YOU_ID AS fYouId
		FROM FRIEND
		WHERE F_MY_ID = #{fMyId}
		AND F_STATE_CD = '10501'
		AND F_MY_ID LIKE CONCAT('%',#{keyWord},'%')
	</select>
	
	<select id="selectUserFriendState" resultType="base.friend.vo.FriendVO">
		
			SELECT F_MY_ID AS fMyId,
					F_YOU_ID AS fYouId,
					F_STATE_CD AS fStateCd,
					F_REG_ID AS fRegId,
					F_REG_DATE AS fRegDate,
					F_MOD_ID AS fModId,
					F_MOD_DATE AS fModDate 
			FROM FRIEND 
			WHERE F_MY_ID = #{fMyId}
			AND F_YOU_ID = #{fYouId}
		
	</select>

	
	<select id="selectFriendNum" resultType="java.lang.Integer">
		
		SELECT COUNT(F_YOU_ID)
		FROM FRIEND
		WHERE F_MY_ID = #{myNick}
		AND F_STATE_CD = '10501'
		
	</select>
	
	
	<update id="addFriendAccept" parameterType="base.friend.vo.FriendVO" >

			UPDATE FRIEND SET
			F_STATE_CD = '10501'
			WHERE F_MY_ID = #{fMyId}
			AND F_YOU_ID = #{fYouId}
		
	</update>
	
	<update id="addFriendAcceptYou" parameterType="base.friend.vo.FriendVO" >

			UPDATE FRIEND SET
			F_STATE_CD = '10501'
			WHERE F_MY_ID =  #{fYouId}
			AND F_YOU_ID =#{fMyId}
		
	</update>
	
	<select id="friendCheck" parameterType="base.friend.vo.FriendVO" resultType="base.friend.vo.FriendVO"  >
		
			SELECT F_STATE_CD AS fStateCd FROM FRIEND 
			WHERE F_MY_ID = #{fMyId} 
			AND F_YOU_ID = #{fYouId}
		
	</select>		
	
</mapper>
